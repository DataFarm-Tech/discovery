{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/SearchBar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\n\ninterface SearchBarProps {\n  value: string;\n  onChange: (value: string) => void;\n  paddocks?: Array<{ paddock_id?: number; id?: number; paddock_name?: string; name?: string }>;\n  devices?: Array<{ node_id: string; node_name: string }>;\n  onItemSelect?: (item: any) => void;\n}\n\nexport default function SearchBar({ \n  value, \n  onChange, \n  paddocks = [], \n  devices = [],\n  onItemSelect \n}: SearchBarProps) {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Combine paddocks and devices into searchable items\n  const searchItems = [\n    ...paddocks.map(p => ({ \n      id: `paddock-${p.paddock_id || p.id}`, \n      name: p.paddock_name || p.name || 'Unnamed Paddock', \n      type: 'paddock',\n      data: p \n    })),\n    ...devices.map(d => ({ \n      id: `device-${d.node_id}`, \n      name: d.node_name || d.node_id, \n      type: 'device',\n      data: d \n    }))\n  ];\n\n  // Filter items based on search query\n  const filteredItems = searchItems.filter(item =>\n    item.name.toLowerCase().includes(value.toLowerCase())\n  );\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowDropdown(false);\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleInputChange = (newValue: string) => {\n    onChange(newValue);\n    setShowDropdown(newValue.length > 0);\n  };\n\n  const handleItemClick = (item: any) => {\n    onChange(item.name);\n    setShowDropdown(false);\n    if (onItemSelect) {\n      onItemSelect(item.data);\n    }\n  };\n\n  return (\n    <div ref={dropdownRef} className=\"flex-1 mx-4 max-w-lg relative\">\n      {/* Search Input */}\n      <div className=\"relative\">\n        <input\n          type=\"text\"\n          placeholder=\"Search paddocks or devices...\"\n          value={value}\n          onChange={(e) => handleInputChange(e.target.value)}\n          onFocus={() => value.length > 0 && setShowDropdown(true)}\n          className=\"w-full px-4 py-2 bg-[#2c3e50] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00be64] transition\"\n        />\n\n        {/* Clear Button */}\n        {value && (\n          <button\n            onClick={() => {\n              onChange('');\n              setShowDropdown(false);\n            }}\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-4 w-4\"\n              viewBox=\"0 0 20 20\"\n              fill=\"currentColor\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n          </button>\n        )}\n      </div>\n\n      {/* Dropdown Results */}\n      {showDropdown && filteredItems.length > 0 && (\n        <div className=\"absolute w-full mt-2 bg-[#1a1f2e] rounded-lg border border-[#00be64]/30 shadow-xl overflow-hidden z-50 max-h-96 overflow-y-auto\">\n          {filteredItems.map((item) => (\n            <div\n              key={item.id}\n              onClick={() => handleItemClick(item)}\n              className=\"px-4 py-3 hover:bg-[#2c3e50] cursor-pointer transition-colors border-b border-gray-700 last:border-b-0 flex items-center gap-3\"\n            >\n              {/* Icon based on type */}\n              <div className={`p-2 rounded-lg ${\n                item.type === 'paddock' \n                  ? 'bg-[#00be64]/20 text-[#00be64]' \n                  : 'bg-blue-500/20 text-blue-400'\n              }`}>\n                {item.type === 'paddock' ? (\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-4 w-4\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                ) : (\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-4 w-4\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path d=\"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z\" />\n                  </svg>\n                )}\n              </div>\n\n              <div className=\"flex-1\">\n                <div className=\"text-white font-medium text-sm\">{item.name}</div>\n                <div className=\"text-xs text-gray-400 capitalize mt-0.5\">\n                  {item.type}\n                </div>\n              </div>\n\n              {/* Arrow icon */}\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-4 w-4 text-gray-400\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* No Results */}\n      {showDropdown && value.length > 0 && filteredItems.length === 0 && (\n        <div className=\"absolute w-full mt-2 bg-[#1a1f2e] rounded-lg border border-[#00be64]/30 shadow-xl overflow-hidden z-50\">\n          <div className=\"px-4 py-6 text-center text-gray-400\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-10 w-10 mx-auto mb-2 opacity-50\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n            <p className=\"text-sm\">No results found</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/DashboardHeader.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport SearchBar from '@/components/SearchBar';\n\ninterface DashboardHeaderProps {\n  userName: string | null;\n  menuOpen: boolean;\n  setMenuOpen: (open: boolean) => void;\n  searchQuery: string;\n  setSearchQuery: (query: string) => void;\n  paddocks?: Array<{ paddock_id?: number; id?: number; paddock_name?: string; name?: string }>;\n  devices?: Array<{ node_id: string; node_name: string }>;\n  onSearchItemSelect?: (item: any) => void;\n}\n\nexport default function DashboardHeader({ \n  userName, \n  menuOpen, \n  setMenuOpen,\n  searchQuery,\n  setSearchQuery,\n  paddocks = [],\n  devices = [],\n  onSearchItemSelect\n}: DashboardHeaderProps) {\n  const router = useRouter();\n\n  return (\n    <header className=\"mb-8 flex justify-between items-center border-b border-white/20 pb-4\">\n      <div className=\"flex items-center gap-3\">\n        <button\n          className=\"text-white/80 hover:text-white transition\"\n          title=\"Menu\"\n          onClick={() => setMenuOpen(!menuOpen)}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 6h16M4 12h16M4 18h16\" />\n          </svg>\n        </button>\n        <h1 className=\"text-2xl font-semibold text-white\">Discovery</h1>\n      </div>\n\n      {/* Use the SearchBar Component with data */}\n      <SearchBar \n        value={searchQuery} \n        onChange={setSearchQuery}\n        paddocks={paddocks}\n        devices={devices}\n        onItemSelect={onSearchItemSelect}\n      />\n\n      <div className=\"flex items-center gap-4\">\n        <button className=\"text-white/80 hover:text-white transition relative\" title=\"Notifications\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n          </svg>\n          <span className=\"absolute top-0 right-0 inline-flex h-2 w-2 rounded-full bg-red-500\"></span>\n        </button>\n\n        <button\n          onClick={() => {\n            localStorage.removeItem('token');\n            router.push('/');\n          }}\n          className=\"px-3 py-1 bg-[#00be64] text-white font-semibold rounded hover:bg-[#009e53] transition\"\n        >\n          Logout\n        </button>\n      </div>\n    </header>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAgBe,SAAS,gBAAgB,EACtC,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,WAAW,EACX,cAAc,EACd,WAAW,EAAE,EACb,UAAU,EAAE,EACZ,kBAAkB,EACG;IACrB,MAAM,SAAS,IAAA,+IAAS;IAExB,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,OAAM;wBACN,SAAS,IAAM,YAAY,CAAC;kCAE5B,cAAA,8OAAC;4BAAI,OAAM;4BAA6B,WAAU;4BAAU,MAAK;4BAAO,SAAQ;4BAAY,QAAO;4BAAe,aAAa;sCAC7H,cAAA,8OAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,GAAE;;;;;;;;;;;;;;;;kCAGzD,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;;;;;;;0BAIpD,8OAAC,0IAAS;gBACR,OAAO;gBACP,UAAU;gBACV,UAAU;gBACV,SAAS;gBACT,cAAc;;;;;;0BAGhB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;wBAAqD,OAAM;;0CAC3E,8OAAC;gCAAI,OAAM;gCAA6B,WAAU;gCAAU,MAAK;gCAAO,SAAQ;gCAAY,QAAO;gCAAe,aAAa;0CAC7H,cAAA,8OAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,GAAE;;;;;;;;;;;0CAEvD,8OAAC;gCAAK,WAAU;;;;;;;;;;;;kCAGlB,8OAAC;wBACC,SAAS;4BACP,aAAa,UAAU,CAAC;4BACxB,OAAO,IAAI,CAAC;wBACd;wBACA,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT"}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { FiSettings, FiLayers } from 'react-icons/fi';\n\ninterface SidebarProps {\n  menuOpen: boolean;\n  setMenuOpen: (state: boolean) => void;\n}\n\nconst Sidebar = ({ menuOpen, setMenuOpen }: SidebarProps) => {\n  return (\n    <>\n      {menuOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 transition-opacity duration-500 ease-in-out\"\n          style={{ opacity: 1 }} // Ensures the background opacity is animated\n          onClick={() => setMenuOpen(false)} // Close the sidebar when clicking outside\n        >\n          <div\n            className={`absolute top-0 left-0 h-full w-[360px] backdrop-blur-lg border-r border-white/20 shadow-lg p-8 flex flex-col justify-between rounded-r-2xl transition-transform duration-500 ease-in-out ${\n              menuOpen ? 'translate-x-0' : '-translate-x-full'\n            }`}\n            style={{ backgroundColor: 'rgba(11, 19, 32, 0.85)' }} // Dark blue background with transparency\n            onClick={(e) => e.stopPropagation()} // Prevent closing when clicking inside\n          >\n            {/* Logo */}\n            <div className=\"mb-6 flex items-center justify-start\">\n              <img src=\"./datafarm-logo-trans.png\" alt=\"DataFarm Logo\" className=\"w-46 h-auto\" />\n            </div>\n\n            {/* Settings and Help at the bottom */}\n            <div className=\"mt-auto\">\n              <ul className=\"space-y-6 text-white/90\">\n                <li className=\"text-lg\">\n                  <a href=\"/settings\" className=\"flex items-center gap-4 hover:text-[#00be64] transition\">\n                    <FiSettings size={24} />\n                    <span>Settings</span>\n                  </a>\n                </li>\n                <li className=\"mb-6 text-lg\">\n                  <a href=\"/help\" className=\"flex items-center gap-4 hover:text-[#00be64] transition\">\n                    <FiLayers size={24} />\n                    <span>Help</span>\n                  </a>\n                </li>\n              </ul>\n            </div>\n\n            {/* Footer */}\n            <div className=\"pt-6 border-t border-white/10 text-sm text-white/70 mt-6\">\n              <p className=\"text-lg\">DataFarm Technologies Pty Ltd Â© {new Date().getFullYear()}</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Sidebar;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASA,MAAM,UAAU,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAgB;IACtD,qBACE;kBACG,0BACC,8OAAC;YACC,WAAU;YACV,OAAO;gBAAE,SAAS;YAAE;YACpB,SAAS,IAAM,YAAY;sBAE3B,cAAA,8OAAC;gBACC,WAAW,CAAC,yLAAyL,EACnM,WAAW,kBAAkB,qBAC7B;gBACF,OAAO;oBAAE,iBAAiB;gBAAyB;gBACnD,SAAS,CAAC,IAAM,EAAE,eAAe;;kCAGjC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,KAAI;4BAA4B,KAAI;4BAAgB,WAAU;;;;;;;;;;;kCAIrE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAG,WAAU;;8CACZ,8OAAC;oCAAG,WAAU;8CACZ,cAAA,8OAAC;wCAAE,MAAK;wCAAY,WAAU;;0DAC5B,8OAAC,4JAAU;gDAAC,MAAM;;;;;;0DAClB,8OAAC;0DAAK;;;;;;;;;;;;;;;;;8CAGV,8OAAC;oCAAG,WAAU;8CACZ,cAAA,8OAAC;wCAAE,MAAK;wCAAQ,WAAU;;0DACxB,8OAAC,0JAAQ;gDAAC,MAAM;;;;;;0DAChB,8OAAC;0DAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOd,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;;gCAAU;gCAAiC,IAAI,OAAO,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAO5F;uCAEe"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/PaddockTable.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\n\nexport interface Paddock {\n  paddock_id?: number;\n  paddock_name: string;\n}\n\nexport default function PaddockTable({\n  paddocks,\n  onAddPaddock,\n}: {\n  paddocks: Paddock[];\n  onAddPaddock: () => void;\n}) {\n  const handlePaddockClick = (paddock: Paddock) => {\n    sessionStorage.setItem(\n      \"paddockData\",\n      JSON.stringify({\n        paddockId: paddock.paddock_id,\n        paddockName: paddock.paddock_name,\n      })\n    );\n  };\n\n  return (\n    <div className=\"bg-[#1a1f2e] border border-[#00be64] rounded-lg shadow-lg p-6 flex-1 w-full\">\n      {/* Header with Add Button */}\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-bold text-white\">My Paddocks</h2>\n        <button\n          onClick={onAddPaddock}\n          className=\"px-5 py-2.5 bg-[#00be64] text-white font-semibold rounded-lg hover:bg-[#009e53] transition-all transform hover:scale-105 shadow-md\"\n        >\n          + Add Paddock\n        </button>\n      </div>\n\n      {/* Empty State */}\n      {paddocks.length === 0 ? (\n        <div className=\"text-center py-16\">\n          <h3 className=\"text-xl font-semibold text-white mb-2\">\n            No Paddocks Yet\n          </h3>\n          <button\n            onClick={onAddPaddock}\n            className=\"px-6 py-3 bg-[#00be64] text-white font-semibold rounded-lg hover:bg-[#009e53] transition-all transform hover:scale-105 shadow-lg\"\n          >\n            Create Your First Paddock\n          </button>\n        </div>\n      ) : (\n        <>\n          <div className=\"mb-4\">\n            <p className=\"text-sm text-gray-400\">\n              Total Paddocks:{\" \"}\n              <span className=\"text-[#00be64] font-semibold\">\n                {paddocks.length}\n              </span>\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {paddocks.map((paddock, index) => (\n              <Link\n                key={paddock.paddock_id || index}\n                href=\"/paddock/view\"\n                onClick={() => handlePaddockClick(paddock)}\n                className=\"bg-[#0f1419] border border-gray-700 rounded-lg p-5 hover:border-[#00be64] hover:shadow-lg transition-all duration-200 group cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 bg-[#00be64]/20 rounded-lg flex items-center justify-center\">\n                    <svg\n                      className=\"w-6 h-6 text-[#00be64]\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n                      />\n                    </svg>\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-white group-hover:text-[#00be64] transition-colors\">\n                      {paddock.paddock_name}\n                    </h3>\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,aAAa,EACnC,QAAQ,EACR,YAAY,EAIb;IACC,MAAM,qBAAqB,CAAC;QAC1B,eAAe,OAAO,CACpB,eACA,KAAK,SAAS,CAAC;YACb,WAAW,QAAQ,UAAU;YAC7B,aAAa,QAAQ,YAAY;QACnC;IAEJ;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgC;;;;;;kCAC9C,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAMF,SAAS,MAAM,KAAK,kBACnB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCAGtD,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;qCAKH;;kCACE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;;gCAAwB;gCACnB;8CAChB,8OAAC;oCAAK,WAAU;8CACb,SAAS,MAAM;;;;;;;;;;;;;;;;;kCAKtB,8OAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,8OAAC,uKAAI;gCAEH,MAAK;gCACL,SAAS,IAAM,mBAAmB;gCAClC,WAAU;0CAEV,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,WAAU;gDACV,MAAK;gDACL,SAAQ;gDACR,QAAO;0DAEP,cAAA,8OAAC;oDACC,eAAc;oDACd,gBAAe;oDACf,aAAa;oDACb,GAAE;;;;;;;;;;;;;;;;sDAIR,8OAAC;sDACC,cAAA,8OAAC;gDAAG,WAAU;0DACX,QAAQ,YAAY;;;;;;;;;;;;;;;;;+BAvBtB,QAAQ,UAAU,IAAI;;;;;;;;;;;;;;;;;;AAkC3C"}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/lib/paddock.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\n\nexport interface CreatePaddockRequest {\n  paddock_name: string | null;\n}\n\nexport interface CreatePaddockResponse {\n  success: boolean;\n  message: string;\n}\n\nexport interface PaddockApiError {\n  success: false;\n  message: string;\n}\nexport interface UpdatePaddockRequest {\n  paddock_name: string;\n}\n\nexport interface UpdatePaddockResponse {\n  success: boolean;\n  message: string;\n  paddock?: {\n    paddock_id: number;\n    paddock_name: string;\n  };\n}\n\nexport interface GetDevicesPaddockResponse {\n    success: boolean;\n    message: string;\n    devices: Array<{\n      node_id: string;\n      node_name: string;\n      battery: number;\n    }>;\n}\n\nexport interface SensorAveragesResponse {\n  success: boolean;\n  message: string;\n  paddock_id?: number;\n  paddock_name?: string;\n  nodes_count?: number;\n  nodes_with_readings?: number;\n  sensor_averages?: {\n    [key: string]: number;\n  };\n  sensor_details?: {\n    [key: string]: {\n      average: number;\n      min: number;\n      max: number;\n      count: number;\n    };\n  };\n}\n\nexport async function getPaddockDevices(\n    paddockId: string,\n    token: string\n  ): Promise<GetDevicesPaddockResponse | PaddockApiError> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}/devices`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n  \n      const data = await response.json();\n  \n      if (!response.ok) {\n        return {\n          success: false,\n          message: data.message || 'Failed to fetch devices',\n          devices: [],\n        };\n      }\n        return {\n        success: true,\n        message: data.message || 'Devices fetched successfully',\n        devices: data.devices || [],\n      };\n\n    } catch (error) {\n      console.error('Error fetching paddock devices:', error);\n      return {\n        success: false,\n        message: 'An error occurred while fetching devices',\n        devices: [],\n      };\n    }\n}\n\n/**\n * Gets sensor averages for a paddock\n * @param paddockId - ID of the paddock\n * @param token - JWT authentication token\n * @returns Promise with sensor averages data\n */\nexport async function getPaddockSensorAverages(\n  paddockId: string,\n  token: string\n): Promise<SensorAveragesResponse | PaddockApiError> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}/sensor-averages`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || 'Failed to fetch sensor averages',\n      };\n    }\n\n    return {\n      success: true,\n      message: data.message || 'Sensor averages fetched successfully',\n      paddock_id: data.paddock_id,\n      paddock_name: data.paddock_name,\n      nodes_count: data.nodes_count,\n      nodes_with_readings: data.nodes_with_readings,\n      sensor_averages: data.sensor_averages || {},\n      sensor_details: data.sensor_details || {},\n    };\n  } catch (error) {\n    console.error('Error fetching sensor averages:', error);\n    return {\n      success: false,\n      message: 'An error occurred while fetching sensor averages',\n    };\n  }\n}\n\n/**\n * Creates a new paddock\n * @param paddockName - Name of the paddock (optional)\n * @param token - JWT authentication token\n * @returns Promise with the API response\n */\nexport async function createPaddock(\n  paddockName: string | null,\n  token: string\n): Promise<CreatePaddockResponse> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/create`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n      body: JSON.stringify({\n        paddock_name: paddockName || null,\n      }),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || data.detail || 'Failed to create paddock',\n      };\n    }\n\n    return {\n      success: true,\n      message: data.message || 'Paddock created successfully'\n    };\n  } catch (error) {\n    console.error('Error creating paddock:', error);\n    return {\n      success: false,\n      message: 'An error occurred. Please try again.',\n    };\n  }\n}\n\n/**\n * Gets all paddocks for the current user\n * @param token - JWT authentication token\n * @returns Promise with array of paddocks\n */\nexport async function getPaddocks(token: string) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/list`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || 'Failed to fetch paddocks',\n        paddocks: [],\n      };\n    }\n\n    return {\n      success: true,\n      paddocks: data.paddocks || [],\n    };\n  } catch (error) {\n    console.error('Error fetching paddocks:', error);\n    return {\n      success: false,\n      message: 'An error occurred while fetching paddocks',\n      paddocks: [],\n    };\n  }\n}\n\n/**\n * Updates a paddock's name\n * @param paddockId - ID of the paddock to update\n * @param paddockName - New name for the paddock\n * @param token - JWT authentication token\n * @returns Promise with the API response\n */\nexport async function updatePaddockName(\n  paddockId: string,\n  paddockName: string,\n  token: string\n): Promise<UpdatePaddockResponse> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n      body: JSON. stringify({\n        paddock_name: paddockName,\n      }),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || data.detail || 'Failed to update paddock',\n      };\n    }\n\n    return {\n      success: true,\n      message: data.message || 'Paddock updated successfully',\n      paddock: data.paddock,\n    };\n  } catch (error) {\n    console.error('Error updating paddock:', error);\n    return {\n      success: false,\n      message: 'An error occurred.  Please try again.',\n    };\n  }\n}\n\n/**\n * Deletes a paddock\n * @param paddockId - ID of the paddock to delete\n * @param token - JWT authentication token\n * @returns Promise with the API response\n */\nexport async function deletePaddock(paddockId: string | number, token: string) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error deleting paddock:', error);\n    return {\n      success: false,\n      message: 'Failed to delete paddock',\n    };\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 956, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/CreatePaddockModal.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport toast from \"react-hot-toast\";\nimport { createPaddock } from \"@/lib/paddock\";\n\ninterface CreatePaddockModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nexport default function CreatePaddockModal({\n  isOpen,\n  onClose,\n  onSuccess,\n}: CreatePaddockModalProps) {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [paddockName, setPaddockName] = useState(\"\");\n\n  const handleCreatePaddock = async () => {\n    setLoading(true);\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        toast.error(\"Please log in first!\");\n        router.push(\"/\");\n        return;\n      }\n\n      const result = await createPaddock(paddockName.trim() || null, token);\n      if (!result.success) {\n        toast.error(result.message);\n        setLoading(false);\n        return;\n      }\n\n      toast.success(result.message);\n      setPaddockName(\"\");\n      onClose();\n\n      if (onSuccess) {\n        onSuccess();\n      } else {\n        setTimeout(() => {\n          router.refresh();\n        }, 500);\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Unexpected error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !loading) {\n      handleCreatePaddock();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-[#121829] border border-[#00be64]/30 rounded-2xl w-full max-w-md\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"border-b border-[#00be64]/20 p-6 flex justify-between items-center\">\n          <h2 className=\"text-2xl font-bold text-white\">Create New Paddock</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-white transition-colors p-1\"\n            disabled={loading}\n            aria-label=\"Close modal\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          <div>\n            <label\n              htmlFor=\"paddockName\"\n              className=\"block text-sm font-semibold mb-2 text-white\"\n            >\n              Paddock Name <span className=\"text-gray-500\">(optional)</span>\n            </label>\n            <input\n              id=\"paddockName\"\n              type=\"text\"\n              value={paddockName}\n              onChange={(e) => setPaddockName(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"e.g., North Field\"\n              className=\"w-full px-4 py-3 bg-[#0c1220] border border-gray-700 rounded-lg text-white focus:outline-none focus:border-[#00be64] transition-colors\"\n              disabled={loading}\n            />\n            <p className=\"text-sm text-gray-400 mt-2\">\n              Leave blank to create an unnamed paddock\n            </p>\n          </div>\n\n          <div className=\"flex gap-3 justify-end pt-4\">\n            <button\n              onClick={onClose}\n              disabled={loading}\n              className=\"px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-all text-white font-medium\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleCreatePaddock}\n              disabled={loading}\n              className={`px-6 py-3 rounded-lg transition-all text-white font-medium ${\n                loading\n                  ? \"bg-[#00be64]/50 cursor-not-allowed\"\n                  : \"bg-[#00be64] hover:bg-[#009e53]\"\n              }`}\n            >\n              {loading ? \"Creating...\" : \"Create Paddock\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAYe,SAAS,mBAAmB,EACzC,MAAM,EACN,OAAO,EACP,SAAS,EACe;IACxB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,sBAAsB;QAC1B,WAAW;QACX,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACV,kKAAK,CAAC,KAAK,CAAC;gBACZ,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,SAAS,MAAM,IAAA,sIAAa,EAAC,YAAY,IAAI,MAAM,MAAM;YAC/D,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,kKAAK,CAAC,KAAK,CAAC,OAAO,OAAO;gBAC1B,WAAW;gBACX;YACF;YAEA,kKAAK,CAAC,OAAO,CAAC,OAAO,OAAO;YAC5B,eAAe;YACf;YAEA,IAAI,WAAW;gBACb;YACF,OAAO;gBACL,WAAW;oBACT,OAAO,OAAO;gBAChB,GAAG;YACL;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,kKAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,SAAS;YACjC;QACF;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,8OAAC;YACC,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAEjC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAgC;;;;;;sCAC9C,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;4BACV,cAAW;sCAEX,cAAA,8OAAC;gCACC,WAAU;gCACV,MAAK;gCACL,QAAO;gCACP,SAAQ;0CAER,cAAA,8OAAC;oCACC,eAAc;oCACd,gBAAe;oCACf,aAAa;oCACb,GAAE;;;;;;;;;;;;;;;;;;;;;;8BAMV,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCACC,SAAQ;oCACR,WAAU;;wCACX;sDACc,8OAAC;4CAAK,WAAU;sDAAgB;;;;;;;;;;;;8CAE/C,8OAAC;oCACC,IAAG;oCACH,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,YAAY;oCACZ,aAAY;oCACZ,WAAU;oCACV,UAAU;;;;;;8CAEZ,8OAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;sCAK5C,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAW,CAAC,2DAA2D,EACrE,UACI,uCACA,mCACJ;8CAED,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzC"}},
    {"offset": {"line": 1170, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport toast from \"react-hot-toast\";\nimport DashboardHeader from \"@/components/DashboardHeader\";\nimport Sidebar from \"@/components/Sidebar\";\nimport StatsTile from \"@/components/StatsTile\";\nimport PaddockTable from \"@/components/PaddockTable\";\nimport { Device } from \"@/components/DeviceTable\";\nimport { Paddock } from \"@/components/PaddockTable\";\nimport { getPaddocks } from \"@/lib/paddock\";\nimport SoilHealthScore from \"@/components/SoilHealthScore\";\nimport CreatePaddockModal from \"@/components/CreatePaddockModal\";\n\n// Load DeviceMap dynamically (Leaflet needs browser APIs)\nconst DeviceMap = dynamic(() => import(\"@/components/DeviceMap\"), {\n  ssr: false,\n});\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const [userName, setUserName] = useState<string | null>(null);\n  const [devices, setDevices] = useState<Device[]>([]);\n  const [paddocks, setPaddocks] = useState<Paddock[]>([]);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isCreatePaddockModalOpen, setIsCreatePaddockModalOpen] =\n    useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      toast.error(\"Please log in first!\");\n      router.push(\"/\");\n    } else {\n      setUserName(\"Lucas\");\n      setDevices([]);\n      fetchPaddocks(token);\n    }\n  }, [router]);\n\n  const fetchPaddocks = async (token: string) => {\n    setLoading(true);\n    try {\n      const result = await getPaddocks(token);\n      if (result.success) {\n        setPaddocks(result.paddocks);\n      } else {\n        toast.error(result.message);\n      }\n    } catch (error) {\n      console.error(\"Error fetching paddocks:\", error);\n      toast.error(\"Failed to load paddocks\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddPaddock = () => {\n    setIsCreatePaddockModalOpen(true);\n  };\n\n  // Handler for when a search item is clicked\n  const handleSearchItemSelect = (item: any) => {\n  console.log('Selected search item:', item);\n\n  // Handle Paddock\n  if (item.paddock_id || item.id) {\n    const paddockId = item.paddock_id || item.id;\n    const paddockName = item.paddock_name || item.name || 'Unnamed Paddock';\n\n    sessionStorage.setItem(\n      \"paddockData\",\n      JSON.stringify({\n        paddockId,\n        paddockName,\n      })\n    );\n    router.push(\"/paddock/view\");\n    setSearchQuery(''); // Optional: clear search after selection\n    return;\n  }\n\n  // Handle Device\n  if (item.node_id) {\n    sessionStorage.setItem(\n      \"selectedDevice\",\n      JSON.stringify({\n        node_id: item.node_id,\n        node_name: item.node_name || item.node_id,\n      })\n    );\n    router.push(`/device/view?nodeId=${item.node_id}`);\n    setSearchQuery(''); // Optional: clear search\n    return;\n  }\n\n  // Fallback (shouldn't happen)\n  toast.error(\"Unable to navigate to selected item\");\n};\n\n  // Filter paddocks by search query\n  const filteredPaddocks = paddocks.filter(p =>\n    (p.paddock_name || p.paddock_name || '')?.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <main className=\"h-screen overflow-hidden bg-[#0c1220] px-6 py-6 text-white relative flex flex-col\">\n      {/* Header */}\n      <DashboardHeader\n        userName={userName}\n        menuOpen={menuOpen}\n        setMenuOpen={setMenuOpen}\n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        paddocks={paddocks}\n        devices={devices}\n        onSearchItemSelect={handleSearchItemSelect}\n      />\n\n      {/* Sidebar */}\n      <Sidebar menuOpen={menuOpen} setMenuOpen={setMenuOpen} />\n\n      {/* Scrollable Main Content */}\n      <div className=\"flex-1 overflow-y-auto space-y-10\">\n        {/* ðŸŒ± Welcome + Soil Score Section */}\n        <section className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* LEFT â€” Welcome */}\n          <div className=\"bg-[#121829] border border-[#00be64]/30 rounded-2xl shadow-xl p-8 relative overflow-hidden col-span-2\">\n            {/* Glow */}\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#00be64]/10 to-transparent pointer-events-none\" />\n\n            <h1 className=\"text-3xl font-bold mb-3 relative z-10\">\n              Welcome to <span className=\"text-[#00be64]\">Discovery</span>\n            </h1>\n\n            <p className=\"text-gray-300 max-w-3xl text-lg leading-relaxed relative z-10\">\n              Discovery is your all-in-one{\" \"}\n              <span className=\"text-white font-semibold\">\n                Soil Intelligence Platform\n              </span>\n              , helping you monitor soil health, track paddock performance, and\n              make data-driven decisions with real-time insights from your\n              on-ground sensors.\n            </p>\n\n            <p className=\"mt-3 text-gray-400 max-w-2xl relative z-10\">\n              Whether you're analysing moisture, temperature, or nutrient\n              trends, Discovery gives you the tools to farm smarter â€” not\n              harder.\n            </p>\n\n            {/* Mobile hint to get the app */}\n            <div className=\"flex gap-4 mt-6 relative z-10 lg:hidden\">\n              <img\n                src=\"/appstore.png\"\n                alt=\"App Store\"\n                className=\"h-10 opacity-80 hover:opacity-100 transition\"\n              />\n              <img\n                src=\"/googleplay.png\"\n                alt=\"Google Play\"\n                className=\"h-10 opacity-80 hover:opacity-100 transition\"\n              />\n            </div>\n          </div>\n        </section>\n\n        {/* ðŸŒ¾ Product Education Section */}\n        <section className=\"bg-[#121829] border border-[#00be64]/30 rounded-2xl shadow-xl p-8 relative overflow-hidden\">\n          {/* Background glow */}\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[#00be64]/5 to-transparent pointer-events-none\" />\n\n          <h2 className=\"text-2xl font-bold mb-4 relative z-10\">\n            Learn How to Get the Most From{\" \"}\n            <span className=\"text-[#00be64]\">Discovery</span>\n          </h2>\n\n          <p className=\"text-gray-300 mb-8 max-w-3xl relative z-10\">\n            Whether you're new to soil monitoring or looking to sharpen your\n            agronomy skills, these guides will help you get more value from your\n            sensors, paddocks, and soil intelligence data.\n          </p>\n\n          {/* Education Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10\">\n            {/* Card 1 */}\n            <div className=\"bg-[#0f1525] border border-[#00be64]/20 rounded-xl p-6 hover:border-[#00be64]/40 transition shadow-lg\">\n              <h3 className=\"text-xl font-semibold mb-2\">\n                ðŸ“¡ Understanding Your Sensors\n              </h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Learn how your Discovery probes capture soil moisture, pH, and\n                temperature data.\n              </p>\n              <button className=\"text-[#00be64] hover:text-[#00d978] font-medium text-sm\">\n                Read more â†’\n              </button>\n            </div>\n\n            {/* Card 2 */}\n            <div className=\"bg-[#0f1525] border border-[#00be64]/20 rounded-xl p-6 hover:border-[#00be64]/40 transition shadow-lg\">\n              <h3 className=\"text-xl font-semibold mb-2\">\n                ðŸŒ± Improving Soil Health\n              </h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Practical steps to increase microbial activity, fertility, and\n                long-term soil resilience.\n              </p>\n              <button className=\"text-[#00be64] hover:text-[#00d978] font-medium text-sm\">\n                Learn how â†’\n              </button>\n            </div>\n\n            {/* Card 3 */}\n            <div className=\"bg-[#0f1525] border border-[#00be64]/20 rounded-xl p-6 hover:border-[#00be64]/40 transition shadow-lg\">\n              <h3 className=\"text-xl font-semibold mb-2\">\n                ðŸ“Š Using Data for Better Decisions\n              </h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Turn your real-time measurements into meaningful farm insights\n                and crop strategies.\n              </p>\n              <button className=\"text-[#00be64] hover:text-[#00d978] font-medium text-sm\">\n                Start learning â†’\n              </button>\n            </div>\n          </div>\n        </section>\n\n        {/* Paddock Table */}\n        <section className=\"flex flex-col lg:flex-row gap-4 mb-4\">\n          {loading ? (\n            <div className=\"bg-[#1a1f2e] border border-[#00be64] rounded-lg shadow p-4 flex-1 w-full\">\n              <p className=\"text-white text-center\">Loading paddocks...</p>\n            </div>\n          ) : (\n            <PaddockTable paddocks={filteredPaddocks} onAddPaddock={handleAddPaddock} />\n          )}\n        </section>\n      </div>\n\n      <CreatePaddockModal\n        isOpen={isCreatePaddockModalOpen}\n        onClose={() => setIsCreatePaddockModalOpen(false)}\n        onSuccess={() => {\n          const token = localStorage.getItem(\"token\");\n          if (token) {\n            fetchPaddocks(token);\n          }\n        }}\n      />\n    </main>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}