{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { FiSettings, FiLayers } from 'react-icons/fi';\n\ninterface SidebarProps {\n  menuOpen: boolean;\n  setMenuOpen: (state: boolean) => void;\n}\n\nconst Sidebar = ({ menuOpen, setMenuOpen }: SidebarProps) => {\n  return (\n    <>\n      {menuOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 transition-opacity duration-500 ease-in-out\"\n          style={{ opacity: 1 }} // Ensures the background opacity is animated\n          onClick={() => setMenuOpen(false)} // Close the sidebar when clicking outside\n        >\n          <div\n            className={`absolute top-0 left-0 h-full w-[360px] backdrop-blur-lg border-r border-white/20 shadow-lg p-8 flex flex-col justify-between rounded-r-2xl transition-transform duration-500 ease-in-out ${\n              menuOpen ? 'translate-x-0' : '-translate-x-full'\n            }`}\n            style={{ backgroundColor: 'rgba(11, 19, 32, 0.85)' }} // Dark blue background with transparency\n            onClick={(e) => e.stopPropagation()} // Prevent closing when clicking inside\n          >\n            {/* Logo */}\n            <div className=\"mb-6 flex items-center justify-start\">\n              <img src=\"./datafarm-logo-trans.png\" alt=\"DataFarm Logo\" className=\"w-46 h-auto\" />\n            </div>\n\n            {/* Settings and Help at the bottom */}\n            <div className=\"mt-auto\">\n              <ul className=\"space-y-6 text-white/90\">\n                <li className=\"text-lg\">\n                  <a href=\"/settings\" className=\"flex items-center gap-4 hover:text-[#00be64] transition\">\n                    <FiSettings size={24} />\n                    <span>Settings</span>\n                  </a>\n                </li>\n                <li className=\"mb-6 text-lg\">\n                  <a href=\"/help\" className=\"flex items-center gap-4 hover:text-[#00be64] transition\">\n                    <FiLayers size={24} />\n                    <span>Help</span>\n                  </a>\n                </li>\n              </ul>\n            </div>\n\n            {/* Footer */}\n            <div className=\"pt-6 border-t border-white/10 text-sm text-white/70 mt-6\">\n              <p className=\"text-lg\">DataFarm Technologies Pty Ltd Â© {new Date().getFullYear()}</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Sidebar;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASA,MAAM,UAAU,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAgB;IACtD,qBACE;kBACG,0BACC,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE,SAAS;YAAE;YACpB,SAAS,IAAM,YAAY;sBAE3B,cAAA,6LAAC;gBACC,WAAW,CAAC,yLAAyL,EACnM,WAAW,kBAAkB,qBAC7B;gBACF,OAAO;oBAAE,iBAAiB;gBAAyB;gBACnD,SAAS,CAAC,IAAM,EAAE,eAAe;;kCAGjC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,KAAI;4BAA4B,KAAI;4BAAgB,WAAU;;;;;;;;;;;kCAIrE,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC;oCAAG,WAAU;8CACZ,cAAA,6LAAC;wCAAE,MAAK;wCAAY,WAAU;;0DAC5B,6LAAC,+JAAU;gDAAC,MAAM;;;;;;0DAClB,6LAAC;0DAAK;;;;;;;;;;;;;;;;;8CAGV,6LAAC;oCAAG,WAAU;8CACZ,cAAA,6LAAC;wCAAE,MAAK;wCAAQ,WAAU;;0DACxB,6LAAC,6JAAQ;gDAAC,MAAM;;;;;;0DAChB,6LAAC;0DAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOd,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;;gCAAU;gCAAiC,IAAI,OAAO,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAO5F;KAhDM;uCAkDS","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/PaddockTable.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\n\nexport interface Paddock {\n  paddock_id?: number;\n  paddock_name: string;\n}\n\nexport default function PaddockTable({\n  paddocks,\n  onAddPaddock,\n}: {\n  paddocks: Paddock[];\n  onAddPaddock: () => void;\n}) {\n  const handlePaddockClick = (paddock: Paddock) => {\n    sessionStorage.setItem(\n      \"paddockData\",\n      JSON.stringify({\n        paddockId: paddock.paddock_id,\n        paddockName: paddock.paddock_name,\n      })\n    );\n  };\n\n  return (\n    <div className=\"bg-[#1a1f2e] border border-[#00be64] rounded-lg shadow-lg p-6 flex-1 w-full\">\n      {/* Header with Add Button */}\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-bold text-white\">My Paddocks</h2>\n        <button\n          onClick={onAddPaddock}\n          className=\"px-5 py-2.5 bg-[#00be64] text-white font-semibold rounded-lg hover:bg-[#009e53] transition-all transform hover:scale-105 shadow-md\"\n        >\n          + Add Paddock\n        </button>\n      </div>\n\n      {/* Empty State */}\n      {paddocks.length === 0 ? (\n        <div className=\"text-center py-16\">\n          <h3 className=\"text-xl font-semibold text-white mb-2\">\n            No Paddocks Yet\n          </h3>\n          <button\n            onClick={onAddPaddock}\n            className=\"px-6 py-3 bg-[#00be64] text-white font-semibold rounded-lg hover:bg-[#009e53] transition-all transform hover:scale-105 shadow-lg\"\n          >\n            Create Your First Paddock\n          </button>\n        </div>\n      ) : (\n        <>\n          <div className=\"mb-4\">\n            <p className=\"text-sm text-gray-400\">\n              Total Paddocks:{\" \"}\n              <span className=\"text-[#00be64] font-semibold\">\n                {paddocks.length}\n              </span>\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {paddocks.map((paddock, index) => (\n              <Link\n                key={paddock.paddock_id || index}\n                href=\"/paddock/view\"\n                onClick={() => handlePaddockClick(paddock)}\n                className=\"bg-[#0f1419] border border-gray-700 rounded-lg p-5 hover:border-[#00be64] hover:shadow-lg transition-all duration-200 group cursor-pointer\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 bg-[#00be64]/20 rounded-lg flex items-center justify-center\">\n                    <svg\n                      className=\"w-6 h-6 text-[#00be64]\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke=\"currentColor\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n                      />\n                    </svg>\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-white group-hover:text-[#00be64] transition-colors\">\n                      {paddock.paddock_name}\n                    </h3>\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,aAAa,EACnC,QAAQ,EACR,YAAY,EAIb;IACC,MAAM,qBAAqB,CAAC;QAC1B,eAAe,OAAO,CACpB,eACA,KAAK,SAAS,CAAC;YACb,WAAW,QAAQ,UAAU;YAC7B,aAAa,QAAQ,YAAY;QACnC;IAEJ;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAgC;;;;;;kCAC9C,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAMF,SAAS,MAAM,KAAK,kBACnB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAwC;;;;;;kCAGtD,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;qCAKH;;kCACE,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;;gCAAwB;gCACnB;8CAChB,6LAAC;oCAAK,WAAU;8CACb,SAAS,MAAM;;;;;;;;;;;;;;;;;kCAKtB,6LAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,6LAAC,0KAAI;gCAEH,MAAK;gCACL,SAAS,IAAM,mBAAmB;gCAClC,WAAU;0CAEV,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDACC,WAAU;gDACV,MAAK;gDACL,SAAQ;gDACR,QAAO;0DAEP,cAAA,6LAAC;oDACC,eAAc;oDACd,gBAAe;oDACf,aAAa;oDACb,GAAE;;;;;;;;;;;;;;;;sDAIR,6LAAC;sDACC,cAAA,6LAAC;gDAAG,WAAU;0DACX,QAAQ,YAAY;;;;;;;;;;;;;;;;;+BAvBtB,QAAQ,UAAU,IAAI;;;;;;;;;;;;;;;;;;AAkC3C;KA3FwB","debugId":null}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/lib/paddock.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\n\nexport interface CreatePaddockRequest {\n  paddock_name: string | null;\n}\n\nexport interface CreatePaddockResponse {\n  success: boolean;\n  message: string;\n}\n\nexport interface PaddockApiError {\n  success: false;\n  message: string;\n}\nexport interface UpdatePaddockRequest {\n  paddock_name: string;\n}\n\nexport interface UpdatePaddockResponse {\n  success: boolean;\n  message: string;\n  paddock?: {\n    paddock_id: number;\n    paddock_name: string;\n  };\n}\n\nexport interface GetDevicesPaddockResponse {\n    success: boolean;\n    message: string;\n    devices: Array<{\n      node_id: string;\n      node_name: string;\n      battery: number;\n    }>;\n}\n\nexport interface SensorAveragesResponse {\n  success: boolean;\n  message: string;\n  paddock_id?: number;\n  paddock_name?: string;\n  nodes_count?: number;\n  nodes_with_readings?: number;\n  sensor_averages?: {\n    [key: string]: number;\n  };\n  sensor_details?: {\n    [key: string]: {\n      average: number;\n      min: number;\n      max: number;\n      count: number;\n    };\n  };\n}\n\nexport async function getPaddockDevices(\n    paddockId: string,\n    token: string\n  ): Promise<GetDevicesPaddockResponse | PaddockApiError> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}/devices`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n  \n      const data = await response.json();\n  \n      if (!response.ok) {\n        return {\n          success: false,\n          message: data.message || 'Failed to fetch devices',\n          devices: [],\n        };\n      }\n        return {\n        success: true,\n        message: data.message || 'Devices fetched successfully',\n        devices: data.devices || [],\n      };\n\n    } catch (error) {\n      console.error('Error fetching paddock devices:', error);\n      return {\n        success: false,\n        message: 'An error occurred while fetching devices',\n        devices: [],\n      };\n    }\n}\n\n/**\n * Gets sensor averages for a paddock\n * @param paddockId - ID of the paddock\n * @param token - JWT authentication token\n * @returns Promise with sensor averages data\n */\nexport async function getPaddockSensorAverages(\n  paddockId: string,\n  token: string\n): Promise<SensorAveragesResponse | PaddockApiError> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}/sensor-averages`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || 'Failed to fetch sensor averages',\n      };\n    }\n\n    return {\n      success: true,\n      message: data.message || 'Sensor averages fetched successfully',\n      paddock_id: data.paddock_id,\n      paddock_name: data.paddock_name,\n      nodes_count: data.nodes_count,\n      nodes_with_readings: data.nodes_with_readings,\n      sensor_averages: data.sensor_averages || {},\n      sensor_details: data.sensor_details || {},\n    };\n  } catch (error) {\n    console.error('Error fetching sensor averages:', error);\n    return {\n      success: false,\n      message: 'An error occurred while fetching sensor averages',\n    };\n  }\n}\n\n/**\n * Creates a new paddock\n * @param paddockName - Name of the paddock (optional)\n * @param token - JWT authentication token\n * @returns Promise with the API response\n */\nexport async function createPaddock(\n  paddockName: string | null,\n  token: string\n): Promise<CreatePaddockResponse> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/create`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n      body: JSON.stringify({\n        paddock_name: paddockName || null,\n      }),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || data.detail || 'Failed to create paddock',\n      };\n    }\n\n    return {\n      success: true,\n      message: data.message || 'Paddock created successfully'\n    };\n  } catch (error) {\n    console.error('Error creating paddock:', error);\n    return {\n      success: false,\n      message: 'An error occurred. Please try again.',\n    };\n  }\n}\n\n/**\n * Gets all paddocks for the current user\n * @param token - JWT authentication token\n * @returns Promise with array of paddocks\n */\nexport async function getPaddocks(token: string) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/list`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || 'Failed to fetch paddocks',\n        paddocks: [],\n      };\n    }\n\n    return {\n      success: true,\n      paddocks: data.paddocks || [],\n    };\n  } catch (error) {\n    console.error('Error fetching paddocks:', error);\n    return {\n      success: false,\n      message: 'An error occurred while fetching paddocks',\n      paddocks: [],\n    };\n  }\n}\n\n/**\n * Updates a paddock's name\n * @param paddockId - ID of the paddock to update\n * @param paddockName - New name for the paddock\n * @param token - JWT authentication token\n * @returns Promise with the API response\n */\nexport async function updatePaddockName(\n  paddockId: string,\n  paddockName: string,\n  token: string\n): Promise<UpdatePaddockResponse> {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n      body: JSON. stringify({\n        paddock_name: paddockName,\n      }),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        message: data.message || data.detail || 'Failed to update paddock',\n      };\n    }\n\n    return {\n      success: true,\n      message: data.message || 'Paddock updated successfully',\n      paddock: data.paddock,\n    };\n  } catch (error) {\n    console.error('Error updating paddock:', error);\n    return {\n      success: false,\n      message: 'An error occurred.  Please try again.',\n    };\n  }\n}\n\n/**\n * Deletes a paddock\n * @param paddockId - ID of the paddock to delete\n * @param token - JWT authentication token\n * @returns Promise with the API response\n */\nexport async function deletePaddock(paddockId: string | number, token: string) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/paddock/${paddockId}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error deleting paddock:', error);\n    return {\n      success: false,\n      message: 'Failed to delete paddock',\n    };\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/CreatePaddockModal.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport toast from \"react-hot-toast\";\nimport { createPaddock } from \"@/lib/paddock\";\n\ninterface CreatePaddockModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nexport default function CreatePaddockModal({\n  isOpen,\n  onClose,\n  onSuccess,\n}: CreatePaddockModalProps) {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [paddockName, setPaddockName] = useState(\"\");\n\n  const handleCreatePaddock = async () => {\n    setLoading(true);\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        toast.error(\"Please log in first!\");\n        router.push(\"/\");\n        return;\n      }\n\n      const result = await createPaddock(paddockName.trim() || null, token);\n      if (!result.success) {\n        toast.error(result.message);\n        setLoading(false);\n        return;\n      }\n\n      toast.success(result.message);\n      setPaddockName(\"\");\n      onClose();\n\n      if (onSuccess) {\n        onSuccess();\n      } else {\n        setTimeout(() => {\n          router.refresh();\n        }, 500);\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Unexpected error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !loading) {\n      handleCreatePaddock();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-[#121829] border border-[#00be64]/30 rounded-2xl w-full max-w-md\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"border-b border-[#00be64]/20 p-6 flex justify-between items-center\">\n          <h2 className=\"text-2xl font-bold text-white\">Create New Paddock</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-white transition-colors p-1\"\n            disabled={loading}\n            aria-label=\"Close modal\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          <div>\n            <label\n              htmlFor=\"paddockName\"\n              className=\"block text-sm font-semibold mb-2 text-white\"\n            >\n              Paddock Name <span className=\"text-gray-500\">(optional)</span>\n            </label>\n            <input\n              id=\"paddockName\"\n              type=\"text\"\n              value={paddockName}\n              onChange={(e) => setPaddockName(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"e.g., North Field\"\n              className=\"w-full px-4 py-3 bg-[#0c1220] border border-gray-700 rounded-lg text-white focus:outline-none focus:border-[#00be64] transition-colors\"\n              disabled={loading}\n            />\n            <p className=\"text-sm text-gray-400 mt-2\">\n              Leave blank to create an unnamed paddock\n            </p>\n          </div>\n\n          <div className=\"flex gap-3 justify-end pt-4\">\n            <button\n              onClick={onClose}\n              disabled={loading}\n              className=\"px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-all text-white font-medium\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleCreatePaddock}\n              disabled={loading}\n              className={`px-6 py-3 rounded-lg transition-all text-white font-medium ${\n                loading\n                  ? \"bg-[#00be64]/50 cursor-not-allowed\"\n                  : \"bg-[#00be64] hover:bg-[#009e53]\"\n              }`}\n            >\n              {loading ? \"Creating...\" : \"Create Paddock\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;AAJA;;;;;AAYe,SAAS,mBAAmB,EACzC,MAAM,EACN,OAAO,EACP,SAAS,EACe;;IACxB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,sBAAsB;QAC1B,WAAW;QACX,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACV,qKAAK,CAAC,KAAK,CAAC;gBACZ,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,SAAS,MAAM,IAAA,yIAAa,EAAC,YAAY,IAAI,MAAM,MAAM;YAC/D,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,qKAAK,CAAC,KAAK,CAAC,OAAO,OAAO;gBAC1B,WAAW;gBACX;YACF;YAEA,qKAAK,CAAC,OAAO,CAAC,OAAO,OAAO;YAC5B,eAAe;YACf;YAEA,IAAI,WAAW;gBACb;YACF,OAAO;gBACL,WAAW;oBACT,OAAO,OAAO;gBAChB,GAAG;YACL;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,qKAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,SAAS;YACjC;QACF;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,6LAAC;YACC,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAEjC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAgC;;;;;;sCAC9C,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;4BACV,cAAW;sCAEX,cAAA,6LAAC;gCACC,WAAU;gCACV,MAAK;gCACL,QAAO;gCACP,SAAQ;0CAER,cAAA,6LAAC;oCACC,eAAc;oCACd,gBAAe;oCACf,aAAa;oCACb,GAAE;;;;;;;;;;;;;;;;;;;;;;8BAMV,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCACC,SAAQ;oCACR,WAAU;;wCACX;sDACc,6LAAC;4CAAK,WAAU;sDAAgB;;;;;;;;;;;;8CAE/C,6LAAC;oCACC,IAAG;oCACH,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,YAAY;oCACZ,aAAY;oCACZ,WAAU;oCACV,UAAU;;;;;;8CAEZ,6LAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;sCAK5C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAW,CAAC,2DAA2D,EACrE,UACI,uCACA,mCACJ;8CAED,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzC;GArIwB;;QAKP,kJAAS;;;KALF","debugId":null}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/components/DashboardHeader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport toast from \"react-hot-toast\";\nimport DashboardHeader from \"@/components/DashboardHeader\";\nimport Sidebar from \"@/components/Sidebar\";\nimport StatsTile from \"@/components/StatsTile\";\nimport PaddockTable from \"@/components/PaddockTable\";\nimport { Device } from \"@/components/DeviceTable\";\nimport { Paddock } from \"@/components/PaddockTable\";\nimport { getPaddocks } from \"@/lib/paddock\";\nimport SoilHealthScore from \"@/components/SoilHealthScore\";\nimport CreatePaddockModal from \"@/components/CreatePaddockModal\";\n\n// Load DeviceMap dynamically (Leaflet needs browser APIs)\nconst DeviceMap = dynamic(() => import(\"@/components/DeviceMap\"), {\n  ssr: false,\n});\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const [userName, setUserName] = useState<string | null>(null);\n  const [devices, setDevices] = useState<Device[]>([]);\n  const [paddocks, setPaddocks] = useState<Paddock[]>([]);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isCreatePaddockModalOpen, setIsCreatePaddockModalOpen] =\n    useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      toast.error(\"Please log in first!\");\n      router.push(\"/\");\n    } else {\n      setUserName(\"Lucas\");\n      setDevices([]);\n      fetchPaddocks(token);\n    }\n  }, [router]);\n\n  const fetchPaddocks = async (token: string) => {\n    setLoading(true);\n    try {\n      const result = await getPaddocks(token);\n      if (result.success) {\n        setPaddocks(result.paddocks);\n      } else {\n        toast.error(result.message);\n      }\n    } catch (error) {\n      console.error(\"Error fetching paddocks:\", error);\n      toast.error(\"Failed to load paddocks\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddPaddock = () => {\n    setIsCreatePaddockModalOpen(true);\n  };\n\n  // Handler for when a search item is clicked\n  const handleSearchItemSelect = (item: any) => {\n    console.log('Selected item:', item);\n    // Navigate to paddock view if it's a paddock\n    if (item.id) {\n      sessionStorage.setItem(\n        \"paddockData\",\n        JSON.stringify({\n          paddockId: item.id,\n          paddockName: item.name,\n        })\n      );\n      router.push(\"/paddock/view\");\n    }\n  };\n\n  // Filter paddocks by search query\n  const filteredPaddocks = paddocks.filter(p =>\n    p.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <main className=\"h-screen overflow-hidden bg-[#0c1220] px-6 py-6 text-white relative flex flex-col\">\n      {/* Header */}\n      <DashboardHeader\n        userName={userName}\n        menuOpen={menuOpen}\n        setMenuOpen={setMenuOpen}\n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        paddocks={paddocks}\n        devices={devices}\n        onSearchItemSelect={handleSearchItemSelect}\n      />\n\n      {/* Sidebar */}\n      <Sidebar menuOpen={menuOpen} setMenuOpen={setMenuOpen} />\n\n      {/* Scrollable Main Content */}\n      <div className=\"flex-1 overflow-y-auto space-y-10\">\n        {/* ðŸŒ± Welcome + Soil Score Section */}\n        <section className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* LEFT â€” Welcome */}\n          <div className=\"bg-[#121829] border border-[#00be64]/30 rounded-2xl shadow-xl p-8 relative overflow-hidden col-span-2\">\n            {/* Glow */}\n            <div className=\"absolute inset-0 bg-gradient-to-br from-[#00be64]/10 to-transparent pointer-events-none\" />\n\n            <h1 className=\"text-3xl font-bold mb-3 relative z-10\">\n              Welcome to <span className=\"text-[#00be64]\">Discovery</span>\n            </h1>\n\n            <p className=\"text-gray-300 max-w-3xl text-lg leading-relaxed relative z-10\">\n              Discovery is your all-in-one{\" \"}\n              <span className=\"text-white font-semibold\">\n                Soil Intelligence Platform\n              </span>\n              , helping you monitor soil health, track paddock performance, and\n              make data-driven decisions with real-time insights from your\n              on-ground sensors.\n            </p>\n\n            <p className=\"mt-3 text-gray-400 max-w-2xl relative z-10\">\n              Whether you're analysing moisture, temperature, or nutrient\n              trends, Discovery gives you the tools to farm smarter â€” not\n              harder.\n            </p>\n\n            {/* Mobile hint to get the app */}\n            <div className=\"flex gap-4 mt-6 relative z-10 lg:hidden\">\n              <img\n                src=\"/appstore.png\"\n                alt=\"App Store\"\n                className=\"h-10 opacity-80 hover:opacity-100 transition\"\n              />\n              <img\n                src=\"/googleplay.png\"\n                alt=\"Google Play\"\n                className=\"h-10 opacity-80 hover:opacity-100 transition\"\n              />\n            </div>\n          </div>\n\n          {/* RIGHT â€” Soil Health Score\n        <div className=\"flex justify-center items-center\">\n          <SoilHealthScore score={78} />\n        </div> */}\n        </section>\n\n        {/* ðŸŒ¾ Product Education Section */}\n        <section className=\"bg-[#121829] border border-[#00be64]/30 rounded-2xl shadow-xl p-8 relative overflow-hidden\">\n          {/* Background glow */}\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[#00be64]/5 to-transparent pointer-events-none\" />\n\n          <h2 className=\"text-2xl font-bold mb-4 relative z-10\">\n            Learn How to Get the Most From{\" \"}\n            <span className=\"text-[#00be64]\">Discovery</span>\n          </h2>\n\n          <p className=\"text-gray-300 mb-8 max-w-3xl relative z-10\">\n            Whether you're new to soil monitoring or looking to sharpen your\n            agronomy skills, these guides will help you get more value from your\n            sensors, paddocks, and soil intelligence data.\n          </p>\n\n          {/* Education Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10\">\n            {/* Card 1 */}\n            <div className=\"bg-[#0f1525] border border-[#00be64]/20 rounded-xl p-6 hover:border-[#00be64]/40 transition shadow-lg\">\n              <h3 className=\"text-xl font-semibold mb-2\">\n                ðŸ“¡ Understanding Your Sensors\n              </h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Learn how your Discovery probes capture soil moisture, pH, and\n                temperature data.\n              </p>\n              <button className=\"text-[#00be64] hover:text-[#00d978] font-medium text-sm\">\n                Read more â†’\n              </button>\n            </div>\n\n            {/* Card 2 */}\n            <div className=\"bg-[#0f1525] border border-[#00be64]/20 rounded-xl p-6 hover:border-[#00be64]/40 transition shadow-lg\">\n              <h3 className=\"text-xl font-semibold mb-2\">\n                ðŸŒ± Improving Soil Health\n              </h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Practical steps to increase microbial activity, fertility, and\n                long-term soil resilience.\n              </p>\n              <button className=\"text-[#00be64] hover:text-[#00d978] font-medium text-sm\">\n                Learn how â†’\n              </button>\n            </div>\n\n            {/* Card 3 */}\n            <div className=\"bg-[#0f1525] border border-[#00be64]/20 rounded-xl p-6 hover:border-[#00be64]/40 transition shadow-lg\">\n              <h3 className=\"text-xl font-semibold mb-2\">\n                ðŸ“Š Using Data for Better Decisions\n              </h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Turn your real-time measurements into meaningful farm insights\n                and crop strategies.\n              </p>\n              <button className=\"text-[#00be64] hover:text-[#00d978] font-medium text-sm\">\n                Start learning â†’\n              </button>\n            </div>\n          </div>\n        </section>\n\n        {/* Paddock Table */}\n        <section className=\"flex flex-col lg:flex-row gap-4 mb-4\">\n          {loading ? (\n            <div className=\"bg-[#1a1f2e] border border-[#00be64] rounded-lg shadow p-4 flex-1 w-full\">\n              <p className=\"text-white text-center\">Loading paddocks...</p>\n            </div>\n          ) : (\n            <PaddockTable paddocks={filteredPaddocks} onAddPaddock={handleAddPaddock} />\n          )}\n        </section>\n      </div>\n\n      <CreatePaddockModal\n        isOpen={isCreatePaddockModalOpen}\n        onClose={() => setIsCreatePaddockModalOpen(false)}\n        onSuccess={() => {\n          const token = localStorage.getItem(\"token\");\n          if (token) {\n            fetchPaddocks(token);\n          }\n        }}\n      />\n    </main>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1216, "column": 0}, "map": {"version":3,"sources":["file:///home/lucasaponso/datafarm/discovery/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport dynamic from 'next/dynamic';\nimport toast from 'react-hot-toast';\nimport DashboardHeader from '@/components/DashboardHeader';\nimport Sidebar from '@/components/Sidebar';\nimport PaddockTable, { Paddock } from '@/components/PaddockTable';\nimport { Device } from '@/components/DeviceTable';\nimport { getPaddocks } from '@/lib/paddock';\nimport CreatePaddockModal from '@/components/CreatePaddockModal';\n\n// Load DeviceMap dynamically\nconst DeviceMap = dynamic(() => import('@/components/DeviceMap'), { ssr: false });\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const [userName, setUserName] = useState<string | null>(null);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [paddocks, setPaddocks] = useState<Paddock[]>([]);\n  const [devices, setDevices] = useState<Device[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isCreatePaddockModalOpen, setIsCreatePaddockModalOpen] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      toast.error('Please log in first!');\n      router.push('/');\n    } else {\n      setUserName('Lucas');\n      setDevices([]); // replace with real devices if needed\n      fetchPaddocks(token);\n    }\n  }, [router]);\n\n  const fetchPaddocks = async (token: string) => {\n    setLoading(true);\n    try {\n      const result = await getPaddocks(token);\n      if (result.success) setPaddocks(result.paddocks);\n      else toast.error(result.message);\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to load paddocks');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddPaddock = () => setIsCreatePaddockModalOpen(true);\n\n  // Handler for when a search item is clicked\n  const handleSearchItemSelect = (item: any) => {\n    console.log('Selected item:', item);\n    // You can add navigation logic here\n    // For example, if it's a paddock, navigate to paddock view\n    // if (item.id) {\n    //   router.push(`/paddock/view?id=${item.id}`);\n    // }\n  };\n\n  // Optional: filter paddocks & devices by search\n  // const filteredPaddocks = paddocks.filter(p =>\n  //   p.name.toLowerCase().includes(searchQuery.toLowerCase())\n  // );\n  // const filteredDevices = devices.filter(d =>\n  //   d.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n  //   d.paddock.toLowerCase().includes(searchQuery.toLowerCase())\n  // );\n\n  // Optional: filter paddocks & devices by search safely\nconst filteredPaddocks = paddocks.filter(\n  (p) => p?.name?.toLowerCase().includes(searchQuery.toLowerCase())\n);\n\nconst filteredDevices = devices.filter(\n  (d) =>\n    d?.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    d?.paddock?.toLowerCase().includes(searchQuery.toLowerCase())\n);\n\n\n  return (\n    <main className=\"h-screen overflow-hidden bg-[#0c1220] px-6 py-6 text-white relative flex flex-col\">\n      <DashboardHeader\n        userName={userName}\n        menuOpen={menuOpen}\n        setMenuOpen={setMenuOpen}\n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        paddocks={paddocks}\n        devices={devices}\n        onSearchItemSelect={handleSearchItemSelect}\n      />\n\n      <Sidebar menuOpen={menuOpen} setMenuOpen={setMenuOpen} />\n\n      <div className=\"flex-1 overflow-y-auto space-y-10\">\n        {/* Paddocks */}\n        <section className=\"flex flex-col lg:flex-row gap-4 mb-4\">\n          {loading ? (\n            <div className=\"bg-[#1a1f2e] border border-[#00be64] rounded-lg shadow p-4 flex-1 w-full\">\n              <p className=\"text-white text-center\">Loading paddocks...</p>\n            </div>\n          ) : (\n            <PaddockTable paddocks={filteredPaddocks} onAddPaddock={handleAddPaddock} />\n          )}\n        </section>\n\n        {/* Devices Map */}\n        <section className=\"flex flex-col gap-4\">\n          {devices.length > 0 && <DeviceMap devices={filteredDevices} />}\n        </section>\n      </div>\n\n      <CreatePaddockModal\n        isOpen={isCreatePaddockModalOpen}\n        onClose={() => setIsCreatePaddockModalOpen(false)}\n        onSuccess={() => {\n          const token = localStorage.getItem('token');\n          if (token) fetchPaddocks(token);\n        }}\n      />\n    </main>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}