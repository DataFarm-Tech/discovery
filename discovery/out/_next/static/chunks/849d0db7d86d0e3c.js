(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68577,40141,22140,2259,e=>{"use strict";var t=e.i(43476),r=e.i(18566),s=e.i(71645);function a({value:e,onChange:r,paddocks:a=[],devices:o=[],onItemSelect:n}){let[c,i]=(0,s.useState)(!1),l=(0,s.useRef)(null),d=[...a.map(e=>({id:`paddock-${e.paddock_id||e.id}`,name:e.paddock_name||e.name||"Unnamed Paddock",type:"paddock",data:e})),...o.map(e=>({id:`device-${e.node_id}`,name:e.node_name||e.node_id,type:"device",data:e}))].filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));return(0,s.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,t.jsxs)("div",{ref:l,className:"flex-1 mx-4 max-w-lg relative",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search paddocks or devices...",value:e,onChange:e=>{var t;r(t=e.target.value),i(t.length>0)},onFocus:()=>e.length>0&&i(!0),className:"w-full px-4 py-2 bg-[#2c3e50] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00be64] transition"}),e&&(0,t.jsx)("button",{onClick:()=>{r(""),i(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),c&&d.length>0&&(0,t.jsx)("div",{className:"absolute w-full mt-2 bg-[#1a1f2e] rounded-lg border border-[#00be64]/30 shadow-xl overflow-hidden z-50 max-h-96 overflow-y-auto",children:d.map(e=>(0,t.jsxs)("div",{onClick:()=>{r(e.name),i(!1),n&&n(e.data)},className:"px-4 py-3 hover:bg-[#2c3e50] cursor-pointer transition-colors border-b border-gray-700 last:border-b-0 flex items-center gap-3",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg ${"paddock"===e.type?"bg-[#00be64]/20 text-[#00be64]":"bg-blue-500/20 text-blue-400"}`,children:"paddock"===e.type?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}):(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-white font-medium text-sm",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-400 capitalize mt-0.5",children:e.type})]}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]},e.id))}),c&&e.length>0&&0===d.length&&(0,t.jsx)("div",{className:"absolute w-full mt-2 bg-[#1a1f2e] rounded-lg border border-[#00be64]/30 shadow-xl overflow-hidden z-50",children:(0,t.jsxs)("div",{className:"px-4 py-6 text-center text-gray-400",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("p",{className:"text-sm",children:"No results found"})]})})]})}function o({userName:e,menuOpen:s,setMenuOpen:o,searchQuery:n,setSearchQuery:c,paddocks:i=[],devices:l=[],onSearchItemSelect:d}){let u=(0,r.useRouter)();return(0,t.jsxs)("header",{className:"mb-8 flex justify-between items-center border-b border-white/20 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{className:"text-white/80 hover:text-white transition",title:"Menu",onClick:()=>o(!s),children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),(0,t.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Discovery"})]}),(0,t.jsx)(a,{value:n,onChange:c,paddocks:i,devices:l,onItemSelect:d}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("button",{className:"text-white/80 hover:text-white transition relative",title:"Notifications",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,t.jsx)("span",{className:"absolute top-0 right-0 inline-flex h-2 w-2 rounded-full bg-red-500"})]}),(0,t.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),u.push("/")},className:"px-3 py-1 bg-[#00be64] text-white font-semibold rounded hover:bg-[#009e53] transition",children:"Logout"})]})]})}e.s(["default",()=>o],68577);var n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=s.default.createContext&&s.default.createContext(n),i=["attr","size","title"];function l(){return(l=Object.assign.bind()).apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var s,a,o;s=e,a=t,o=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in s?Object.defineProperty(s,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[a]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e){return t=>s.default.createElement(p,l({attr:u({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.default.createElement(t.tag,u({key:r},t.attr),e(t.child)))}(e.child))}function p(e){var t=t=>{var r,{attr:a,size:o,title:n}=e,c=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),d=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.default.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),n&&s.default.createElement("title",null,n),e.children)};return void 0!==c?s.default.createElement(c.Consumer,null,e=>t(e)):t(n)}function m(e){return h({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(e)}function g(e){return h({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}e.s(["GenIcon",()=>h],40141),e.s(["default",0,({menuOpen:e,setMenuOpen:r})=>(0,t.jsx)(t.Fragment,{children:e&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 transition-opacity duration-500 ease-in-out",style:{opacity:1},onClick:()=>r(!1),children:(0,t.jsxs)("div",{className:`absolute top-0 left-0 h-full w-[360px] backdrop-blur-lg border-r border-white/20 shadow-lg p-8 flex flex-col justify-between rounded-r-2xl transition-transform duration-500 ease-in-out ${e?"translate-x-0":"-translate-x-full"}`,style:{backgroundColor:"rgba(11, 19, 32, 0.85)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"mb-6 flex items-center justify-start",children:(0,t.jsx)("img",{src:"./datafarm-logo-trans.png",alt:"DataFarm Logo",className:"w-46 h-auto"})}),(0,t.jsx)("div",{className:"mt-auto",children:(0,t.jsxs)("ul",{className:"space-y-6 text-white/90",children:[(0,t.jsx)("li",{className:"text-lg",children:(0,t.jsxs)("a",{href:"/settings",className:"flex items-center gap-4 hover:text-[#00be64] transition",children:[(0,t.jsx)(g,{size:24}),(0,t.jsx)("span",{children:"Settings"})]})}),(0,t.jsx)("li",{className:"mb-6 text-lg",children:(0,t.jsxs)("a",{href:"/help",className:"flex items-center gap-4 hover:text-[#00be64] transition",children:[(0,t.jsx)(m,{size:24}),(0,t.jsx)("span",{children:"Help"})]})})]})}),(0,t.jsx)("div",{className:"pt-6 border-t border-white/10 text-sm text-white/70 mt-6",children:(0,t.jsxs)("p",{className:"text-lg",children:["DataFarm Technologies Pty Ltd Â© ",new Date().getFullYear()]})})]})})})],22140);let f=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function v(e,t){try{let r=await fetch(`${f}/paddock/${e}/devices`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),s=await r.json();if(!r.ok)return{success:!1,message:s.message||"Failed to fetch devices",devices:[]};return{success:!0,message:s.message||"Devices fetched successfully",devices:s.devices||[]}}catch(e){return console.error("Error fetching paddock devices:",e),{success:!1,message:"An error occurred while fetching devices",devices:[]}}}async function x(e,t){try{let r=await fetch(`${f}/paddock/${e}/sensor-averages`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),s=await r.json();if(!r.ok)return{success:!1,message:s.message||"Failed to fetch sensor averages"};return{success:!0,message:s.message||"Sensor averages fetched successfully",paddock_id:s.paddock_id,paddock_name:s.paddock_name,nodes_count:s.nodes_count,nodes_with_readings:s.nodes_with_readings,sensor_averages:s.sensor_averages||{},sensor_details:s.sensor_details||{}}}catch(e){return console.error("Error fetching sensor averages:",e),{success:!1,message:"An error occurred while fetching sensor averages"}}}async function w(e,t){try{let r=await fetch(`${f}/paddock/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({paddock_name:e||null})}),s=await r.json();if(!r.ok)return{success:!1,message:s.message||s.detail||"Failed to create paddock"};return{success:!0,message:s.message||"Paddock created successfully"}}catch(e){return console.error("Error creating paddock:",e),{success:!1,message:"An error occurred. Please try again."}}}async function b(e){try{let t=await fetch(`${f}/paddock/list`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}),r=await t.json();if(!t.ok)return{success:!1,message:r.message||"Failed to fetch paddocks",paddocks:[]};return{success:!0,paddocks:r.paddocks||[]}}catch(e){return console.error("Error fetching paddocks:",e),{success:!1,message:"An error occurred while fetching paddocks",paddocks:[]}}}async function j(e,t,r){try{let s=await fetch(`${f}/paddock/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({paddock_name:t})}),a=await s.json();if(!s.ok)return{success:!1,message:a.message||a.detail||"Failed to update paddock"};return{success:!0,message:a.message||"Paddock updated successfully",paddock:a.paddock}}catch(e){return console.error("Error updating paddock:",e),{success:!1,message:"An error occurred.  Please try again."}}}async function y(e,t){try{let r=await fetch(`${f}/paddock/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});return await r.json()}catch(e){return console.error("Error deleting paddock:",e),{success:!1,message:"Failed to delete paddock"}}}e.s(["createPaddock",()=>w,"deletePaddock",()=>y,"getPaddockDevices",()=>v,"getPaddockSensorAverages",()=>x,"getPaddocks",()=>b,"updatePaddockName",()=>j],2259)}]);